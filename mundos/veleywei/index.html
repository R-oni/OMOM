<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Outros Mundos Outras Mentes</title>
  <!-- Link para a fonte "Press Start 2P" -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    /* ===== ESTILOS PARA MOBILE (Vertical) – INALTERADOS ===== */
    #loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: black;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    
    #loading-text {
      font-family: 'Press Start 2P', cursive;
      color: #00FFE7;
      font-size: 20px;
      text-align: center;
    }
    
    #automatonCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1;
      image-rendering: pixelated;
    }
    
    body {
      margin: 0;
      padding: 0;
      font-family: 'Courier New', Courier, monospace;
      background-color: black;
      overflow: hidden;
      color: white;
    }
    
    .title-container {
      text-align: center;
      margin-top: 50px;
      position: relative;
      z-index: 2;
    }
    
    .title-container img {
      max-width: 50%;
    }
    
    .symbols-wrapper {
      position: absolute;
      top: 150px;
      left: 0;
      right: 0;
      bottom: 0;
      overflow-y: auto;
      padding: 20px;
      z-index: 2;
    }
    
    .symbols-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }
    
    .symbol {
      position: relative;
      transform-origin: center;
      transition: transform 0.1s linear;
    }
    
    .symbol img {
      width: 25vw;
      transition: transform 0.3s;
    }
    
    .symbol img:hover {
      transform: scale(1.1);
    }
    
    .symbol.brither img {
      filter: brightness(180%);
    }
    
    .symbol.locked img {
      filter: brightness(50%);
    }
    
    /* ===== ESTILOS GLOBAIS PARA FUNDO E ÁUDIO – INALTERADOS ===== */
    
    /* ===== LAYOUT MOBILE: Usado quando a tela não for horizontal ===== */
    .mobile-container {
      display: block;
    }
    
    /* ===== LAYOUT PC/HORIZONTAL – DISPOSIÇÃO LIVRE COM POSICIONAMENTO ABSOLUTO ===== */
    @media screen and (min-width: 1024px) and (orientation: landscape) {
      /* Esconde a versão mobile */
      .mobile-container {
        display: none;
      }
      /* Exibe o container exclusivo para PC */
      .pc-container {
        display: block;
        position: relative;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
      }
      /* Título – posicionado na parte superior esquerda */
      .pc-title {
        position: absolute;
        top: 20px;       /* ajuste manual */
        left: 20px;      /* ajuste manual */
        width: 400px;    /* ajuste manual */
        height: 150px;   /* ajuste manual */
        z-index: 2;
      }
      .pc-title img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }
      /* Flipbook – posicionado na parte inferior esquerda */
      .pc-flipbook {
        position: absolute;
        bottom: 20px;    /* ajuste manual */
        left: 20px;      /* ajuste manual */
        width: 300px;    /* ajuste manual */
        height: 150px;   /* ajuste manual */
        z-index: 2;
        background: #222;  /* apenas para visualização */
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: grab;
      }
      /* Globo – posicionado à direita, centralizado verticalmente */
      .pc-globe {
        position: absolute;
        top: 50%;
        right: 20px;     /* ajuste manual */
        width: 500px;    /* ajuste manual */
        height: 500px;   /* ajuste manual */
        transform: translateY(-50%);
        z-index: 2;
      }
      .pc-globe canvas {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }
    }
  </style>
</head>
<body>
  <!-- Tela de Loading -->
  <div id="loading-screen">
    <div id="loading-text">CARREGANDO...</div>
  </div>
  
  <!-- Canvas de fundo -->
  <canvas id="automatonCanvas"></canvas>
  
  <!-- Layout Mobile: Título e Símbolos (permanece inalterado) -->
  <div class="mobile-container">
    <div class="title-container">
      <a href="omom.html">
        <img src="assets/title.png" alt="Outros Mundos Outras Mentes">
      </a>
    </div>
    <div class="symbols-wrapper">
      <div class="symbols-container">
        <div class="symbol brither" id="symbol1">
          <a href="mundos/veleywei/index.html">
            <img src="assets/veleyweimenu.png" alt="Velei'wey">
          </a>
        </div>
        <div class="symbol brither" id="symbol2">
          <a href="mundos/botychera/index.html">
            <img src="mundos/botychera/botycheramenu.png" alt="Botychera">
          </a>
        </div>
        <div class="symbol brither" id="symbol3">
          <a href="mundos/himpis/index.html">
            <img src="mundos/himpis/himpismenu.png" alt="Himpis">
          </a>
        </div>
        <div class="symbol brither" id="symbol4">
          <a href="mundos/ttok/index.html">
            <img src="mundos/ttok/ttokmenu.png" alt="T'Tok">
          </a>
        </div>
        <div class="symbol brither" id="symbol5">
          <a href="mundos/denbou/index.html">
            <img src="mundos/denbou/denboumenu.png" alt="dendenboubou">
          </a>
        </div>
        <div class="symbol brither" id="symbol6">
          <a href="mundos/araporu/index.html">
            <img src="mundos/araporu/araporumenu.png" alt="araporu">
          </a>
        </div>
        <div class="symbol brither" id="symbol7">
          <a href="mundos/os artesaos/index.html">
            <img src="mundos/os artesaos/artesaosmenu.png" alt="rtesaos">
          </a>
        </div>
        <div class="symbol brither" id="symbol8">
          <a href="mundos/sapador/index.html">
            <img src="mundos/sapador/sapador.png" alt="sapador">
          </a>
        </div>
        <div class="symbol locked" id="symbol9">
          <a href="mundos/calindreno/index.html">
            <img src="mundos/calindreno/calindreno.png" alt="cal8ndreno">
          </a>
        </div>
        <div class="symbol locked" id="symbol10">
          <a href="mundos/mundo pulsante/index.html">
            <img src="mundos/mundo pulsante/jocelyn.png" alt="cal8ndreno">
          </a>
        </div>
        <div class="symbol" id="symbol11">
          <a href="mundos/dosirelala/index.html">
            <img src="mundos/dosirelala/dosirelalamenu.png" alt="sapador">
          </a>
        </div>
        <div class="symbol locked" id="symbol12">
          <a href="mundos/ttok/index.html">
            <img src="mundos/mundo 1/mundo1.png" alt="cal8ndreno">
          </a>
        </div>
        <div class="symbol locked" id="symbol13">
          <a href="mundos/ttok/index.html">
            <img src="mundos/mundo 2/mundo2.png" alt="cal8ndreno">
          </a>
        </div>
        <div class="symbol locked" id="symbol14">
          <a href="mundos/ttok/index.html">
            <img src="mundos/mundo 3/mundo3menu.png" alt="cal8ndreno">
          </a>
        </div>
        <div class="symbol locked" id="symbol15">
          <a href="mundos/ttok/index.html">
            <img src="mundos/mundo 4/mundo4menu.png" alt="cal8ndreno">
          </a>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Layout PC: Exibe o container com posicionamento absoluto -->
  <div class="pc-container" style="display:none;">
    <div class="pc-title">
      <a href="omom.html">
        <img src="assets/title.png" alt="Outros Mundos Outras Mentes">
      </a>
    </div>
    <div class="pc-flipbook">
      Conteúdo do Flipbook
    </div>
    <div class="pc-globe">
      <canvas id="globeCanvas"></canvas>
    </div>
  </div>
  
  <!-- Música de fundo: arpeggio.mp3 -->
  <audio id="bgm" loop>
    <source src="arpeggio.mp3" type="audio/mpeg">
    Seu navegador não suporta o elemento de áudio.
  </audio>
  
  <!-- Scripts -->
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- jQuery UI e Touch Punch para permitir arrastar com o mouse -->
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
  <!-- Three.js e OrbitControls (mantidos do backup) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/controls/OrbitControls.js"></script>
  <!-- turn.js (para flipbook, se necessário) -->
  <script src="turn.min.js"></script>
  <script>
    // Configuração do áudio
    let flipAudio;
    const flipAudioStart = 1;
    const flipAudioEnd = 1.4;
    
    document.addEventListener('DOMContentLoaded', () => {
      flipAudio = new Audio('sompagina.aac');
      flipAudio.preload = 'auto';
      flipAudio.load();
      flipAudio.volume = 0.2;
      
      document.addEventListener('click', function unlockAudio() {
        flipAudio.play().then(() => {
          flipAudio.pause();
          flipAudio.currentTime = flipAudioStart;
        });
        document.removeEventListener('click', unlockAudio);
      });
    });
    
    $(document).ready(function(){
      // Inicializa o flipbook se necessário
      $("#flipbook").turn({
        autoCenter: false,
        display: 'double'
      });
      
      // Alteração do cursor para arrastar no flipbook
      $("#flipbook").on("mousedown", function(){
        $(this).css("cursor", "grabbing");
      }).on("mouseup mouseleave", function(){
        $(this).css("cursor", "grab");
      });
      
      // Redimensiona o flipbook para PC/horizontal via JavaScript
      function resizeFlipbook() {
        if(window.matchMedia("(min-width: 1024px) and (orientation: landscape)").matches){
          let newWidth = window.innerWidth * 0.25;
          let newHeight = window.innerHeight * 0.35;
          $("#flipbook").turn("size", newWidth, newHeight);
        } else {
          var newWidth = $(window).width() * 0.9;
          var newHeight = newWidth * (450/600);
          $("#flipbook").turn("size", newWidth, newHeight);
        }
      }
      resizeFlipbook();
      $(window).resize(function(){
        resizeFlipbook();
      });
      
      // Exibe o overlay quando clicado
      $(document).on("click", "#veleyweiBtn, #veleyweiBtn2", function(){
        $("#overlayImage").attr("src", "corpoyeroben.png");
        $("#overlayContainer").fadeIn(500);
        $("#overlayImage").css("transform", "translate(-50%, -50%) scale(1)");
      });
      
      $("#btnSair").on("click", function(){
        $("#overlayContainer").fadeOut(500);
      });
      
      var overlayScale = 1;
      $("#overlayImage").on("wheel", function(e) {
        e.preventDefault();
        overlayScale += (e.originalEvent.deltaY < 0) ? 0.1 : -0.1;
        overlayScale = Math.max(0.1, overlayScale);
        $(this).css("transform", "translate(-50%, -50%) scale(" + overlayScale + ")");
      });
      
      $("#overlayContainer").on("click", function(e){
        if(e.target.id === "overlayContainer"){
          $(this).fadeOut(500);
        }
      });
      
      // Se estiver em tela horizontal, exibe o layout PC e oculta o mobile
      if(window.matchMedia("(min-width: 1024px) and (orientation: landscape)").matches){
        $(".pc-container").css("display", "block");
        $(".mobile-container").css("display", "none");
      }
    });
  </script>
  <!-- Chamada do globo.js – mantendo o backup original -->
  <script src="./globo.js"></script>
  <script>
    (function() {
      const canvas = document.getElementById("warpCanvas");
      const ctx = canvas.getContext("2d");
      let stars = [];
      const numStars = 300;
      const speed = 2;
      let animationFrameId;
      
      function setupCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      function createStars() {
        stars = [];
        for (let i = 0; i < numStars; i++) {
          stars.push({
            x: Math.random() * canvas.width - canvas.width / 2,
            y: Math.random() * canvas.height - canvas.height / 2,
            z: Math.random() * canvas.width
          });
        }
      }
      function updateStars() {
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#FFFFFF";
        stars.forEach(star => {
          star.z -= speed;
          if (star.z <= 0) {
            star.x = Math.random() * canvas.width - canvas.width / 2;
            star.y = Math.random() * canvas.height - canvas.height / 2;
            star.z = canvas.width;
          }
          let perspective = 300 / star.z;
          let sx = star.x * perspective + canvas.width / 2;
          let sy = star.y * perspective + canvas.height / 2;
          let size = Math.max(2 * perspective, 0.5);
          ctx.beginPath();
          ctx.arc(sx, sy, size, 0, 2 * Math.PI);
          ctx.fill();
        });
        animationFrameId = requestAnimationFrame(updateStars);
      }
      setupCanvas();
      createStars();
      updateStars();
      window.addEventListener("resize", function() {
        setupCanvas();
        createStars();
      });
      window.addEventListener("load", function() {
        document.getElementById("loading-screen").style.display = "none";
        cancelAnimationFrame(animationFrameId);
      });
    })();
  </script>
</body>
</html>
