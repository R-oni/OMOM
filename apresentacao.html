<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OMOM – Globos Himpis & Botychera</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      background: #000;
      color: #fff;
      font-family: 'Press Start 2P', cursive;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      margin: 24px 0;
      font-size: 24px;
      letter-spacing: 2px;
      text-align: center;
    }
    .world {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 48px;
      width: 100%;
    }
    canvas {
      width: 90vw;
      max-width: 600px;
      height: 40vh;
      background: #111;
      visibility: hidden;
    }
    .presentation {
      margin-top: 16px;
      width: 90vw;
      max-width: 600px;
      height: auto;
    }
  </style>
</head>
<body>
  <h1>OMOM</h1>

  <!-- Seção Himpis -->
  <div class="world">
    <canvas id="globeHimpis"></canvas>
    <img class="presentation" src="mundos/himpis/apresentacaohimpis.png" alt="Apresentação Himpis" />
  </div>

  <!-- Seção Botychera -->
  <div class="world">
    <canvas id="globeBotychera"></canvas>
    <img class="presentation" src="mundos/botychera/apresentacaobotychera.png" alt="Apresentação Botychera" />
  </div>

  <!-- Bibliotecas Three.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/controls/OrbitControls.js"></script>

  <script>
  
  // Inicializa o globo de Himpis
  function initGlobeHimpis() {
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60, 1, 0.1, 1000);
    camera.position.z = 3;

    const canvas = document.getElementById('globeHimpis');
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
    renderer.setClearColor(0x000000, 0);
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;

    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    const geometry = new THREE.SphereGeometry(1, 64, 64);

    let loaded = 0;
    const textureLoader = new THREE.TextureLoader();
    function checkLoaded() {
      loaded++;
      if (loaded === 2) {
        canvas.style.visibility = 'visible';
      }
    }
    const texture = textureLoader.load('mundos/himpis/mapahimpis.png', checkLoaded);
    const material = new THREE.MeshStandardMaterial({ map: texture });
    const sphere = new THREE.Mesh(geometry, material);
    sphere.castShadow = true;
    sphere.receiveShadow = true;
    scene.add(sphere);

    const cloudGeo = new THREE.SphereGeometry(1.015, 64, 64);
    const cloudTex = textureLoader.load('mundos/himpis/nuvemhimpis.png', checkLoaded);
    const cloudMat = new THREE.MeshPhongMaterial({ map: cloudTex, transparent: true, opacity: 1, depthWrite: false });
    const cloudMesh = new THREE.Mesh(cloudGeo, cloudMat);
    scene.add(cloudMesh);

    const ambient = new THREE.AmbientLight(0xffffff, 0.2);
    scene.add(ambient);
    const directional = new THREE.DirectionalLight(0xffffff, 1);
    directional.position.set(3, 3, 5);
    directional.castShadow = true;
    scene.add(directional);

    function animate() {
      requestAnimationFrame(animate);
      sphere.rotation.y += 0.003;
      cloudMesh.rotation.y += 0.0039;
      renderer.setSize(canvas.clientWidth, canvas.clientHeight, false);
      renderer.render(scene, camera);
    }
    animate();

    window.addEventListener('resize', () => {
      camera.aspect = canvas.clientWidth / canvas.clientHeight;
      camera.updateProjectionMatrix();
    });
  }

  // Inicializa o globo de Botychera
  function initGlobeBotychera() {
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60, 1, 0.1, 1000);
    camera.position.z = 4;

    const canvas = document.getElementById('globeBotychera');
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;

    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    const geometry = new THREE.SphereGeometry(1, 64, 64);

    let loaded = 0;
    const textureLoader = new THREE.TextureLoader();
    function checkLoaded() {
      loaded++;
      if (loaded === 2) {
        canvas.style.visibility = 'visible';
      }
    }
    const texture = textureLoader.load('mundos/botychera/mapabotychera.png', checkLoaded);
    const material = new THREE.MeshStandardMaterial({ map: texture });
    const sphere = new THREE.Mesh(geometry, material);
    sphere.castShadow = true;
    sphere.receiveShadow = true;
    scene.add(sphere);

    const cloudGeo = new THREE.SphereGeometry(1.01, 64, 64);
    const cloudTex = textureLoader.load('mundos/botychera/nuvembotychera.png', checkLoaded);
    const cloudMat = new THREE.MeshPhongMaterial({ map: cloudTex, transparent: true, opacity: 1, depthWrite: false });
    const cloudMesh = new THREE.Mesh(cloudGeo, cloudMat);
    scene.add(cloudMesh);

    sphere.rotation.x = Math.PI / 22;
    cloudMesh.rotation.x = Math.PI / 22;

    const ambient = new THREE.AmbientLight(0xffffff, 0.2);
    scene.add(ambient);
    const directional = new THREE.DirectionalLight(0xffffff, 1);
    directional.position.set(3, 3, 5);
    directional.castShadow = true;
    scene.add(directional);

    // Anel
    const ringGeo = new THREE.RingGeometry(2.3, 2.4, 64);
    const ringMat = new THREE.MeshStandardMaterial({ color: 0xffffff, side: THREE.DoubleSide, transparent: true, opacity: 0.5 });
    const ring = new THREE.Mesh(ringGeo, ringMat);
    ring.rotation.x = -Math.PI / 2;
    sphere.add(ring);

    // Globo orbitante
    const pivot = new THREE.Object3D();
    scene.add(pivot);
    const miniGeo = new THREE.SphereGeometry(0.1, 32, 32);
    const miniMat = new THREE.MeshStandardMaterial({ color: 0x654321 });
    const miniSphere = new THREE.Mesh(miniGeo, miniMat);
    miniSphere.position.x = 4;
    pivot.add(miniSphere);

    function animate() {
      requestAnimationFrame(animate);
      sphere.rotation.y += 0.003;
      cloudMesh.rotation.y += 0.0039;
      pivot.rotation.y += 0.01;
      controls.update();
      renderer.setSize(canvas.clientWidth, canvas.clientHeight, false);
      renderer.render(scene, camera);
    }
    animate();

    window.addEventListener('resize', () => {
      camera.aspect = canvas.clientWidth / canvas.clientHeight;
      camera.updateProjectionMatrix();
    });
  }

  // Inicializa ambos os globos quando a página carrega
  window.onload = function() {
    initGlobeHimpis();
    initGlobeBotychera();
  };
  </script>
</body>
</html>
