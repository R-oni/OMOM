<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<title>OMOM – debug globos</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
  body{margin:0;background:#000;color:#fff;font-family:'Press Start 2P',cursive;display:flex;flex-direction:column;align-items:center}
  h1{margin:20px 0;font-size:22px}
  canvas{width:90vw;max-width:600px;height:40vh;margin:18px 0;background:#111}
</style>
</head>
<body>
  <h1>OMOM</h1>
  <canvas id="himpis"></canvas>
  <canvas id="boty"></canvas>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/controls/OrbitControls.js"></script>
<script>
function webglOk(){ try{ const c=document.createElement('canvas'); return !!(window.WebGL2RenderingContext&&c.getContext('webgl2')||c.getContext('webgl')); }catch(e){ return false;}}
if(!webglOk()){ alert("Seu navegador/GPU não habilitou WebGL — por isso nada aparece."); }

function globo(cfg){
  const canvas=document.getElementById(cfg.id);
  const ren=new THREE.WebGLRenderer({canvas,antialias:true,alpha:true});
  const cam=new THREE.PerspectiveCamera(60,1,0.1,1000); cam.position.z=cfg.z||3;
  const scene=new THREE.Scene();
  const ctl=new THREE.OrbitControls(cam,ren.domElement);

  // esfera cor fallback
  const geo=new THREE.SphereGeometry(1,64,64);
  const mat=new THREE.MeshBasicMaterial({color:cfg.color});
  const sph=new THREE.Mesh(geo,mat); scene.add(sph);

  // tenta textura
  if(cfg.map){
    const loader=new THREE.TextureLoader(); loader.setCrossOrigin("");
    loader.load(cfg.map,
      tex=>{ mat.map=tex; mat.needsUpdate=true; console.log("OK:",cfg.map); },
      undefined,
      err=>console.error("404/erro =>",cfg.map,err)
    );
  }

  // anima
  function tick(){
    requestAnimationFrame(tick);
    sph.rotation.y+=0.003;
    ren.setSize(canvas.clientWidth,canvas.clientHeight,false);
    cam.aspect=canvas.clientWidth/canvas.clientHeight; cam.updateProjectionMatrix();
    ren.render(scene,cam);
  } tick();
}

window.onload=function(){
  globo({id:"himpis",map:"mundos/himpis/mapahimpis.png",color:0xff00ff});
  globo({id:"boty",  map:"mundos/botychera/mapabotychera.png",color:0x00ffff, z:4});
};
</script>
</body>
</html>
