<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>OMOM SPA</title>

<!-- Fonte estética -->
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet"/>

<!-- Swiper CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css"/>

<style>
body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  background: #000;
  color: #fff;
  font-family: 'Press Start 2P', cursive;
  overflow: hidden;
}

#omom-screen {
  position: fixed; inset: 0;
  display: flex; align-items: center; justify-content: center;
  background: #000; z-index: 10;
}

#omom-title {
  font-size: 32px; color: #00FFE7;
  opacity: 0;
  animation: fadeIn 2s forwards;
}

@keyframes fadeIn {
  to { opacity: 1; }
}

#soundPrompt {
  position: fixed; inset: 0;
  display: none; flex-direction: column; align-items: center; justify-content: center;
  background: #000; z-index: 9;
}

.soundBtn {
  margin: 10px; padding: 10px 20px;
  font-family: 'Press Start 2P', cursive;
  background: none; border: 2px solid #00FFE7; color: #00FFE7;
  cursor: pointer;
}

#menu {
  display: none; flex-direction: column; align-items: center; justify-content: center;
  position: fixed; inset: 0; background: #000; z-index: 8;
}

.world-btn {
  margin: 10px; padding: 10px 20px;
  font-family: 'Press Start 2P', cursive;
  background: none; border: 2px solid #00FFE7; color: #00FFE7;
  cursor: pointer;
}

#swiper-area {
  display: none;
  position: fixed; inset: 0;
  background: #000;
  z-index: 7;
}

.swiper {
  width: 100%;
  height: 100%;
}

#btnVoltar {
  position: fixed; top: 10px; left: 10px;
  background: rgba(0,0,0,0.7); border: 2px solid #00FFE7;
  color: #00FFE7;
  font-family: 'Press Start 2P', cursive;
  font-size: 12px; padding: 8px; cursor: pointer;
  z-index: 8;
  display: none;
}
</style>
</head>

<body>
<!-- Audio -->
<audio id="bgm" src="animus.mp3" preload="auto" loop></audio>
<audio id="memories" src="memories.mp3" preload="auto" loop></audio>

<!-- Fade OMOM -->
<div id="omom-screen">
  <div id="omom-title">OMOM</div>
</div>

<!-- Prompt Som -->
<div id="soundPrompt">
  <p>Ativar SOM?</p>
  <button class="soundBtn" id="btnYes">SIM</button>
  <button class="soundBtn" id="btnNo">NÃO</button>
</div>

<!-- Menu de Mundos -->
<div id="menu">
  <button class="world-btn" data-world="batedores">Batedores</button>
  <button class="world-btn" disabled>Veleywei</button>
  <button class="world-btn" disabled>Botychera</button>
  <button class="world-btn" disabled>Himpis</button>
</div>

<!-- Swiper Area -->
<div id="swiper-area">
  <button id="btnVoltar">VOLTAR</button>
  <div class="swiper">
    <div class="swiper-wrapper">
      <!-- Slides injetados pelo batedores.js -->
    </div>
    <div class="swiper-button-prev" style="color:#00FFE7;"></div>
    <div class="swiper-button-next" style="color:#00FFE7;"></div>
    <div class="swiper-pagination"></div>
  </div>
</div>

<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
<!-- THREE.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/controls/OrbitControls.js"></script>
<!-- jQuery opcional -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
let allowSound = false;
const bgm = document.getElementById('bgm');
const memories = document.getElementById('memories');

window.addEventListener('load', () => {
  setTimeout(() => {
    document.getElementById('omom-screen').style.display = 'none';
    document.getElementById('soundPrompt').style.display = 'flex';
  }, 2000);
});

document.getElementById('btnYes').onclick = () => startSite(true);
document.getElementById('btnNo').onclick = () => startSite(false);

function startSite(sound) {
  allowSound = sound;
  document.getElementById('soundPrompt').style.display = 'none';
  if (allowSound) bgm.play().catch(()=>{});
  document.getElementById('menu').style.display = 'flex';
}

document.querySelectorAll('.world-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const world = btn.dataset.world;
    openWorld(world);
  });
});

function openWorld(world) {
  document.getElementById('menu').style.display = 'none';
  document.getElementById('swiper-area').style.display = 'block';
  document.getElementById('btnVoltar').style.display = 'block';
  if (allowSound) {
    bgm.pause();
    memories.play().catch(()=>{});
  }

  const script = document.createElement('script');
  script.src = world + '.js';
  document.body.appendChild(script);
}

document.getElementById('btnVoltar').addEventListener('click', () => {
  document.querySelector('.swiper .swiper-wrapper').innerHTML = '';
  document.getElementById('swiper-area').style.display = 'none';
  document.getElementById('btnVoltar').style.display = 'none';
  if (allowSound) {
    memories.pause();
    bgm.play().catch(()=>{});
  }
  document.getElementById('menu').style.display = 'flex';
});
</script>
</body>
</html>
